As with other opioids , diacetylmorphine is used as both an analgesic and a recreational drug .
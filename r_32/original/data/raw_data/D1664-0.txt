Scott Pilgrim vs. the World is a 2010 American comedy film directed by Edgar Wright , based on the graphic novel series Scott Pilgrim by Bryan Lee O'Malley .
We Can Work It Out is a song by the Beatles , written by Paul McCartney and John Lennon .
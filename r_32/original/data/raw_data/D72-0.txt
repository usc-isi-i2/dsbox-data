Willy Wonka & the Chocolate Factory is a 1971 musical film adaptation of the 1964 novel Charlie and the Chocolate Factory by Roald Dahl , directed by Mel Stuart , and starring Gene Wilder as Willy Wonka .
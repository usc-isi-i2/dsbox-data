Sucker Punch is a 2011 American fantasy action film directed by Zack Snyder and co-written by him and Steve Shibuya .
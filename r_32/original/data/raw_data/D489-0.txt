The Hangover is a 2009 American comedy film , co-produced and directed by Todd Phillips and written by Jon Lucas and Scott Moore .
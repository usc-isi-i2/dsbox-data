Transformers: Dark of the Moon is a 2011 American science fiction action film based on the Transformers toy line .
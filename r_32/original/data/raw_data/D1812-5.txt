The provision of DOMA forbidding the federal government from recognizing same-sex marriages has been found unconstitutional in eight federal courts , including two federal appeals courts .